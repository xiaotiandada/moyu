[{"/Users/xiaotian/Code/moyu/client/src/reportWebVitals.ts":"1","/Users/xiaotian/Code/moyu/client/src/views/Home/index.tsx":"2","/Users/xiaotian/Code/moyu/client/src/api/client.ts":"3","/Users/xiaotian/Code/moyu/client/src/App.tsx":"4","/Users/xiaotian/Code/moyu/client/src/views/List/index.tsx":"5","/Users/xiaotian/Code/moyu/client/src/store/index.ts":"6","/Users/xiaotian/Code/moyu/client/src/api/index.ts":"7","/Users/xiaotian/Code/moyu/client/src/views/Detail/index.tsx":"8","/Users/xiaotian/Code/moyu/client/src/index.tsx":"9","/Users/xiaotian/Code/moyu/client/src/store/otherSlice.ts":"10","/Users/xiaotian/Code/moyu/client/src/store/userSlice.ts":"11","/Users/xiaotian/Code/moyu/client/src/theme/index.tsx":"12","/Users/xiaotian/Code/moyu/client/src/hooks/useThemeMode.tsx":"13","/Users/xiaotian/Code/moyu/client/src/i18n.ts":"14","/Users/xiaotian/Code/moyu/client/src/serviceWorkerRegistration.ts":"15","/Users/xiaotian/Code/moyu/client/src/components/Footer/index.tsx":"16","/Users/xiaotian/Code/moyu/client/src/views/Custom/index.tsx":"17","/Users/xiaotian/Code/moyu/client/src/components/Header/index.tsx":"18","/Users/xiaotian/Code/moyu/client/src/views/Bookshelf/index.tsx":"19","/Users/xiaotian/Code/moyu/client/src/views/Setting/index.tsx":"20","/Users/xiaotian/Code/moyu/client/src/utils/cookie.ts":"21","/Users/xiaotian/Code/moyu/client/src/utils/index.ts":"22"},{"size":425,"mtime":1620901170221,"results":"23","hashOfConfig":"24"},{"size":1427,"mtime":1627844236468,"results":"25","hashOfConfig":"26"},{"size":1324,"mtime":1621310745884,"results":"27","hashOfConfig":"24"},{"size":1618,"mtime":1621753207458,"results":"28","hashOfConfig":"26"},{"size":1550,"mtime":1627844273023,"results":"29","hashOfConfig":"26"},{"size":1255,"mtime":1620901170222,"results":"30","hashOfConfig":"24"},{"size":992,"mtime":1627843345596,"results":"31","hashOfConfig":"26"},{"size":4581,"mtime":1627844577227,"results":"32","hashOfConfig":"26"},{"size":1373,"mtime":1621334347063,"results":"33","hashOfConfig":"24"},{"size":281,"mtime":1620901170222,"results":"34","hashOfConfig":"24"},{"size":1517,"mtime":1620901170223,"results":"35","hashOfConfig":"24"},{"size":3478,"mtime":1621310365261,"results":"36","hashOfConfig":"26"},{"size":241,"mtime":1620901170220,"results":"37","hashOfConfig":"24"},{"size":596,"mtime":1620901170220,"results":"38","hashOfConfig":"24"},{"size":5255,"mtime":1621333858969,"results":"39","hashOfConfig":"26"},{"size":1033,"mtime":1621753732938,"results":"40","hashOfConfig":"26"},{"size":1166,"mtime":1621363257279,"results":"41","hashOfConfig":"24"},{"size":2268,"mtime":1621760120642,"results":"42","hashOfConfig":"24"},{"size":1428,"mtime":1621761019116,"results":"43","hashOfConfig":"24"},{"size":3089,"mtime":1627844481176,"results":"44","hashOfConfig":"26"},{"size":587,"mtime":1621757806503,"results":"45","hashOfConfig":"26"},{"size":300,"mtime":1627844439044,"results":"46","hashOfConfig":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},"1mxsxcr",{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1gtcrnq",{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/xiaotian/Code/moyu/client/src/reportWebVitals.ts",[],["96","97"],"/Users/xiaotian/Code/moyu/client/src/views/Home/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/api/client.ts",[],"/Users/xiaotian/Code/moyu/client/src/App.tsx",[],"/Users/xiaotian/Code/moyu/client/src/views/List/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/store/index.ts",[],["98","99"],"/Users/xiaotian/Code/moyu/client/src/api/index.ts",[],"/Users/xiaotian/Code/moyu/client/src/views/Detail/index.tsx",["100"],"import React, { useEffect, useState, useMemo } from 'react'\nimport styled from 'styled-components'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { Button, Slider, message, Space, BackTop, Spin } from 'antd'\nimport { ptwxzDetail } from '../../api/index'\nimport store from 'store'\nimport LoadingSpin from '../../components/LoadingSpin'\nimport { asyncSystemContent } from '../../utils/index'\nimport { asyncSystem } from '../../api/index'\n\nconst ListPage: React.FC = () => {\n  const [loading, setLoading] = useState<boolean>(false)\n  const [detail, setDetail] = useState<any>()\n  const [fontSize, setFontSize] = useState<number>(1)\n  const [fontSizeVisable, setFontSizeVisable] = useState<Boolean>(false)\n  let { id, page } = useParams<{ id: string, page: string }>();\n  let history = useHistory();\n\n  useEffect(() => {\n\n    /**\n     * fetch\n     */\n    const fetch = async () => {\n\n      setLoading(true)\n\n      const res: any = await ptwxzDetail({\n        id: decodeURIComponent(id),\n        page: decodeURIComponent(page)\n      })\n      console.log('res', res)\n      if (res.code === 0) {\n        setDetail(res.data)\n\n        let historyStore = store.get('history') || []\n        let data = {\n          title: res.data.title,\n          subtitle: res.data.subtitle,\n          id: res.data.id,\n          page: res.data.page,\n        }\n\n        let idx  = historyStore.findIndex((i: any) => decodeURIComponent(i.id) === decodeURIComponent(id))\n        if (~idx) {\n          console.log('已存在')\n          historyStore[idx] = data\n        } else {\n          historyStore.push(data)\n        }\n\n        store.set('history', historyStore)\n\n        setLoading(false)\n\n        handleAsyncSystem()\n      }\n    }\n\n    /**\n     * 同步字体设置\n     */\n    const asyncFontSize = () => {\n      let fontSize = store.get('font-size') || 1\n      setFontSize(fontSize)\n    }\n\n    fetch()\n    asyncFontSize()\n  }, [id, page]);\n\n  const prev = () => {\n    if (detail?.prev.id) {\n      history.push(`/${id}/${detail?.prev.id}`);\n    } else {\n      message.error('没有上一章')\n    }\n  }\n  const next = () => {\n    if (detail?.next.id) {\n      history.push(`/${id}/${detail?.next.id}`);\n    } else {\n      message.error('没有下一章')\n    }\n  }\n\n  /**\n   * 同步系统配置和历史记录\n   */\n  const handleAsyncSystem = async () => {\n    let data = asyncSystemContent()\n\n    try {\n      const res: any = await asyncSystem(data)\n      if (res.code === 0) {\n        console.log('同步成功')\n      } else {\n        console.log('同步失败')\n      }\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const fontSizeStyle = useMemo(() => {\n    let list: any = {\n      0: '14px',\n      1: '16px',\n      2: '18px',\n      3: '20px',\n      4: '22px',\n      5: '24px',\n    }\n    return list[fontSize] || '16px'\n  }, [fontSize])\n\n  const handleChange = (value: number) => {\n    store.set('font-size', value)\n    setFontSize(value)\n  }\n\n  return (\n    <StyledWrapper>\n      {\n        loading ?\n        <LoadingSpin></LoadingSpin> :\n        <StyledMd style={{ fontSize: fontSizeStyle }} dangerouslySetInnerHTML={{ __html: detail?.content }}></StyledMd>\n      }\n      <StyledFixed>\n        <Space>\n          <Button onClick={prev} loading={ loading }>{\n            detail?.prev.id ? 'Prev' : 'Not'\n          }</Button>\n          <Button onClick={next} loading={ loading }>{\n            detail?.next.id ? 'Next' : 'Not'\n          }</Button>\n        </Space>\n        <Space>\n          <Button onClick={() => setFontSizeVisable(!fontSizeVisable)}>A</Button>\n        </Space>\n        {\n          fontSizeVisable ? <StyledSlider>\n            <Slider style={{ width: 180 }} defaultValue={fontSize} max={5} min={0} onChange={handleChange} />\n            <span>{fontSizeStyle}</span>\n          </StyledSlider> : null\n        }\n      </StyledFixed>\n      <BackTop />\n    </StyledWrapper>\n  )\n}\n\nconst StyledWrapper = styled.div`\n  margin: 0;\n`\nconst StyledMd = styled.div`\n  margin: 0;\n  padding: 10px 10px 64px 10px;\n`\nconst StyledFixed = styled.div`\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #fff;\n  display: flex;\n  justify-content: space-between;\n  height: 50px;\n  padding: 0 10px;\n  border-top: 1px solid #f1f1f1;\n  box-sizing: border-box;\n`\nconst StyledSlider = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: fixed;\n  bottom: 70px;\n  left: 0;\n  right: 0;\n  background: #fff;\n  border-top: 1px solid #f1f1f1;\n  border-bottom: 1px solid #f1f1f1;\n  padding: 4px 20px;\n`\n\nexport default ListPage","/Users/xiaotian/Code/moyu/client/src/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/store/otherSlice.ts",[],"/Users/xiaotian/Code/moyu/client/src/store/userSlice.ts",[],["101","102"],"/Users/xiaotian/Code/moyu/client/src/theme/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/hooks/useThemeMode.tsx",[],["103","104"],"/Users/xiaotian/Code/moyu/client/src/i18n.ts",[],"/Users/xiaotian/Code/moyu/client/src/serviceWorkerRegistration.ts",[],"/Users/xiaotian/Code/moyu/client/src/components/Footer/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/views/Custom/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/components/Header/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/views/Bookshelf/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/views/Setting/index.tsx",[],"/Users/xiaotian/Code/moyu/client/src/utils/cookie.ts",[],"/Users/xiaotian/Code/moyu/client/src/utils/index.ts",[],{"ruleId":"105","replacedBy":"106"},{"ruleId":"107","replacedBy":"108"},{"ruleId":"105","replacedBy":"109"},{"ruleId":"107","replacedBy":"110"},{"ruleId":"111","severity":1,"message":"112","line":4,"column":51,"nodeType":"113","messageId":"114","endLine":4,"endColumn":55},{"ruleId":"105","replacedBy":"115"},{"ruleId":"107","replacedBy":"116"},{"ruleId":"105","replacedBy":"117"},{"ruleId":"107","replacedBy":"118"},"no-native-reassign",["119"],"no-negated-in-lhs",["120"],["119"],["120"],"@typescript-eslint/no-unused-vars","'Spin' is defined but never used.","Identifier","unusedVar",["119"],["120"],["119"],["120"],"no-global-assign","no-unsafe-negation"]